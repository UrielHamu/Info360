@{
    ViewData["Title"] = "VerProductos";
    var productos = ViewBag.Productos as List<dynamic>;
    var cliente = ViewBag.cliente;
     var filtroActual = Context.Request.Query["filtro"];
}
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - NombreProyecto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="estilo.css" asp-append-version="true" />
</head>

<body>
    <header class="fifo-header">
        <div class="header-inner">
            <!-- Logo -->
            <a class="navbar-brand d-flex align-items-center" href='@Url.Action("Index","Home")'>
                <img src="img/Logo-removebg-preview.png" alt="FIFO" class="me-2">
            </a>
    
            <!-- Bot√≥n hamburguesa SOLO para mobile -->
            <button class="menu-toggle" type="button" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
    
            <!-- Men√∫ -->
            <ul class="nav header-nav" id="headerMenu">
                <li class="nav-item">
                    <a class="nav-link" href='@Url.Action("VerDescuentos", "Cliente")'>Productos</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href='@Url.Action("VerEmpresas", "Cliente")'>Empresas</a>
                </li>
            </ul>
        </div>
    </header>
    
    
    
 <main>
    <h4 class="text-center mb-4 fw-semibold" style="font-family:'Poppins', sans-serif;">Explor√° productos para vos:</h4>
    <div class="info-pill-wrapper">
        <div class="info-pill">
            <span class="info-pill-icon">i</span>
            <span>¬øPor qu√© estos productos tienen descuento?</span>
        </div>

        <div class="info-tooltip-card">
            <p>
                Son alimentos que todav√≠a est√°n en buen estado, pero se acercan a su vencimiento.
                Al comprarlos, ahorr√°s plata y ayud√°s a reducir el desperdicio de comida. üåç
            </p>
        </div>
    </div>

      
      <!-- DESKTOP: tarjetitas visibles -->
<section class="pasos-empresas pasos-desktop">
    <div class="paso-item">
        <span class="paso-num">1</span>
        <h6>Eleg√≠ c√≥mo ordenar</h6>
        <p>Us√° el men√∫ de arriba para filtrar por categor√≠a o por nivel de descuento.</p>
    </div>
    <div class="paso-item">
        <span class="paso-num">2</span>
        <h6>Mir√° la info del producto</h6>
        <p>Revis√° el supermercado, el precio original, el precio con descuento y la fecha de vencimiento.</p>
    </div>
    <div class="paso-item">
        <span class="paso-num">3</span>
        <h6>Acercate al local</h6>
        <p>Compr√° el producto en el supermercado indicado y evit√° que termine en la basura.</p>
    </div>
</section>

<!-- MOBILE: bot√≥n ‚Äú¬øC√≥mo funciona?‚Äù -->
<div class="pasos-mobile">
    <button class="btn-tutorial" type="button"
            onclick="document.getElementById('tutorialProductos').style.display='flex'">
        ¬øC√≥mo funciona?
    </button>
</div>

<!-- MODAL MOBILE -->
<div id="tutorialProductos" class="tutorial-modal">
    <div class="tutorial-content">
        <h3>¬øC√≥mo aprovechar estos descuentos?</h3>
        <ol>
            <li><strong>Eleg√≠ c√≥mo ordenar</strong> los productos usando el men√∫ amarillo.</li>
            <li><strong>Mir√° la info del producto</strong>: supermercado, precio original, precio con descuento y fecha de vencimiento.</li>
            <li><strong>Acercate al local</strong> indicado y compr√° el producto antes de que se venza.</li>
        </ol>

        <button class="btn-cerrar" type="button"
                onclick="document.getElementById('tutorialProductos').style.display='none'">
            Entendido
        </button>
    </div>
</div>


<div class="dropdown">
  <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown">
      @(filtroActual == "1" ? "Categoria" :
        filtroActual == "2" ? "Menor a mayor descuento" :
        filtroActual == "3" ? "Mayor a menor descuento" :
        "Ver productos")
  </button>
  <ul class="dropdown-menu">
    <li><a class="dropdown-item" href="#" onclick="aplicarFiltro(1)">Categoria</a></li>
    <li><a class="dropdown-item" href="#" onclick="aplicarFiltro(2)">Menor a mayor precio</a></li>
    <li><a class="dropdown-item" href="#" onclick="aplicarFiltro(3)">Mayor a menor precio</a></li>
  </ul>
  <p class="hint-busqueda">
    Us√° el men√∫ amarillo para ordenar por categor√≠a o por nivel de descuento.
</p>
</div>


@if (ViewBag.Productos != null && ViewBag.Productos.Count > 0)
{
    <div class="productos-grid">
        @foreach (ProductosTemporales producto in ViewBag.Productos)
        {
            <section class="producto-cardFIFO">
                <img src="~/img/@producto.Foto" alt="@producto.Nombre" class="producto-imgFIFO" />

                <div class="producto-infoFIFO">
                    <h5 class="prod-nombre">@producto.Nombre</h5>
                    <p>Supermercado: @producto.Local</p>
                    <p>Precio original: $@producto.PrecioInicial</p>
                    <p>Precio con descuento: $@producto.PrecioConDescuento</p>
                    <p>Categor√≠a: @producto.Categoria</p>
                    <p>Vence: @producto.FechaVencimiento.ToString("dd/MM/yyyy")</p>
                </div>
            </section>
        }
    </div>
}
else
{
    <p class="productos-vacio">
        Hoy no hay productos con descuento disponibles.  
        Volv√© m√°s tarde o explor√° las <a href='@Url.Action("VerEmpresas","Cliente")'>empresas adheridas</a>.
    </p>
}


</main>
<p class="productos-resumen">
    FIFO no vende online. Para comprar estos productos, acercate directamente al supermercado indicado.
</p>
<footer class="footer">
    <div class="footer-top">
        <div class="footer-logo">
            <img src="img/Captura_de_pantalla_2025-03-28_122750-removebg-preview.png" alt="Logo FIFO">
            <p>Dale una segunda oportunidad a los alimentos. Reduc√≠ el desperdicio, ayud√° al planeta üåç</p>
        </div>

        <div class="footer-links">
            <div>
                <h4>Sobre FIFO</h4>
              <ul>
                  <li><a href='@Url.Action("Index", "Account")'>Que es FIFO?</a></li>
                  <li><a href='@Url.Action("Index", "Account")'>Nuestra propuesta</a></li>
                  <li><a href='@Url.Action("Index", "Account")'>Por qu√© lo hacemos?</a></li>
              </ul>
          </div>
          <div>
              <h4>Due√±o</h4>
              <ul>
                  <li><a href='@Url.Action("AgregarProducto", "Due√±o")'>Agregar producto</a></li>
                  <li><a href='@Url.Action("EliminarProducto", "Due√±o")'>Eliminar producto</a></li>
                  <li><a href='@Url.Action("AgregarProducto", "Due√±o")'>Modificar producto</a></li>
                  <li><a href='@Url.Action("VerProductosMiLocal", "Due√±o")'>Ver productos</a></li>
              </ul>
          </div>
          <div>
              <h4>Cliente</h4>
              <ul>
                  <li><a href='@Url.Action("VerEmpresas", "Due√±o")'>Ver empresas</a></li>
                  <li><a href='@Url.Action("VerProductos", "Due√±o")'>Ver productos</a></li>
              </ul>
          </div>
        </div>

    <div class="footer-bottom">
        <p>¬© 2025 FIFO | Desarrollado por el equipo FIFO</p>
    </div>
</footer>
<script>
     function aplicarFiltro(filtro) {
        window.location.href = '@Url.Action("VerProductos", "Cliente")?filtro=' + filtro;
    }

    // Men√∫ hamburguesa: toggle clase menu-open
    function toggleMenu() {
        const menu = document.getElementById('headerMenu');
        if (menu) {
            menu.classList.toggle('menu-open');
        }
    }
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
